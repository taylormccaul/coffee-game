<!DOCTYPE html>
<html>
    <head>
        <title>Coffee</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://fonts.googleapis.com/css?family=Roboto|Montserrat|Oswald&display=swap" rel="stylesheet">
        <style>
            /*:root {

            }Add root color variables*/

            html, body {
                padding: 0;
                margin: 0;
            }

            .grid-container {
                display: grid;
                background-color:gray;
                grid-template-columns: repeat(3, 2fr 1fr 1fr);
                grid-gap: 0;
                width: 100vw;
                height: 100vh;
            }

            input, button {
                display: block;
            }

            .calc-container {
                background: rgb(155, 155, 255);
                padding: 10px;
                box-sizing: border-box;
                width: 45vw;
                font-family: 'Montserrat', sans-serif;
            }

            .calc-container > input, button {
                border: none;
                padding: 7px;
                margin: 5px;
            }

            .calc-container input {
                width: 11.1rem;
            }

            button {
                width: 12rem;
            }

            button:hover {
                cursor: pointer;
            }

            .make-container {
                background: rgb(255, 255, 155);
                padding: 10px;
                box-sizing: border-box;
                width: 25vw;
                font-family: 'Montserrat', sans-serif;
            }
            
            .res-container {
                background: rgb(255, 141, 141);
                padding: 10px;
                box-sizing: border-box;
                width: 30vw;
                text-align: center;
                font-family: 'Montserrat', sans-serif;
            }

            #add-water, #add-milk, #add-beans {
                display: inline;
            }
        </style>
    </head>
    <body>
        <div class="grid-container">
            <div class="calc-container">
                <label for="calc" id="calc-label">How many cups of coffee do you need? Enter an integer: </label>
                <input type="text" name="calc" id="calc">
                <button type="submit" name="calc-submit" id="calc-submit">Submit</button>
                <!--<label for="water" id="water-label">How many ml of water does the coffee machine have?</label>
                <input type="text" name="water" id="water">
                <button type="submit" name="water-submit" id="water-submit">Submit</button>
                <label for="milk" id="milk-label">How many ml of milk does the coffee machine have?</label>
                <input type="text" name="milk" id="milk">
                <button type="submit" name="milk-submit" id="milk-submit">Submit</button>
                <label for="beans" id="beans-label">How many g of coffee beans does the coffee machine have?</label>
                <input type="text" name="beans" id="beans">
                <button type="submit" name="beans-submit" id="beans-submit">Submit</button>-->
                <label for="cups" id="cups-label">How many cups of coffee do you want to make?</label>
                <input type="text" name="target-cups" id="target-cups">
                <button type="submit" name="cups-submit" id="cups-submit">Submit</button>
            </div>
            <div class="make-container">
                <button type="button" name="brew" id="brew">Brew</button>
            </div>
            <div class="res-container">
                <p id="money-p"></p>
                <p id="calc-p"></p>
                <p id="machine-p"></p>
                <p id="water-label">Add 200 mg water ($1)</p>
                <button type="button" name="add-water" id="add-water">+</button>
                <p id="milk-label">Add 50 mg milk ($2)</p>
                <button type="button" name="add-milk" id="add-milk">+</button>
                <p id="beans-label">Add 15 g coffee beans($3)</p>
                <button type="button" name="add-beans" id="add-beans">+</button>
                <p id="water-amount"></p>
                <p id="milk-amount"></p>
                <p id="beans-amount"></p>
            </div>
        </div>
        <script>
            /*startP = document.getElementById('start-p');
            startP.innerHTML = "Starting to make coffee...";

            setTimeout(() => { startP.innerHTML = "Boiling water..." }, 3000);

            setTimeout(() => { startP.innerHTML = "Mixing boiled water with crushed coffee beans..." }, 3000);

            setTimeout(() => { startP.innerHTML = "Pouring coffee into the cup..." }, 3000);

            setTimeout(() => { startP.innerHTML = "Grinding coffee beans..." }, 3000);
            
            setTimeout(() => { startP.innerHTML = "Pouring some milk into the cup..." }, 3000);

            setTimeout(() => { startP.innerHTML = "Coffee is ready!"}, 3000);*/
            /*Boiling water<br>
            Mixing boiled water with crushed coffee beans<br>
            Pouring coffee into the cup<br>
            Pouring some milk into the cup<br>
            Coffee is ready`*/

            let water = 200;
            let milk = 50;
            let beans = 15;

            let cups = document.getElementById('calc').value;

            let waterLabel = document.getElementById('water-label');
            let milkLabel = document.getElementById('milk-label');
            let beansLabel = document.getElementById('beans-label');
            let cupsLabel = document.getElementById('calc-label');

            let calcBtn = document.getElementById('calc-submit');
            let cupsBtn = document.getElementById('cups-submit');
            let brewBtn = document.getElementById('brew');

            let calcP = document.getElementById('calc-p');
            let moneyP = document.getElementById('money-p');
            let machineP = document.getElementById('machine-p');
            let waterAmountP = document.getElementById('water-amount');
            let milkAmountP = document.getElementById('milk-amount');
            let beansAmountP = document.getElementById('beans-amount');

            let addWater = document.getElementById('add-water');
            let addMilk = document.getElementById('add-milk');
            let addBeans = document.getElementById('add-beans');

            let waterAmount = 0;
            let milkAmount = 0;
            let beansAmount = 0;
            let moneyAmount = 0;

            let targetCups = document.getElementById('target-cups').value;

            calcBtn.addEventListener('click', calculate);
            cupsBtn.addEventListener('click', check);
            brewBtn.addEventListener('click', brew);

            moneyP.innerHTML = `Money:<br>
            ${moneyAmount}`;

            //calculate ingredients needed to make a certain amount of coffee

            function calculate(e) {
                cups = document.getElementById('calc').value;
                water *= cups;
                milk *= cups;
                beans *= cups;
                calcP.innerHTML = (`For ${cups} cup(s) of coffee, you will need:<br> 
                ${water} ml of water<br>
                ${milk} ml of milk<br>
                ${beans} g of coffee beans`);
                water = 200;
                milk = 50;
                beans = 15;
            }

            //Automatically add 3 dollars every three seconds
            setInterval(() => {
                moneyP.innerHTML = "Money: <br>" + "$" + (moneyAmount += 10);
            }, 3000);

            if (moneyAmount === 0) {
                moneyP.innerHTML = "Money: <br>" + "$" + (moneyAmount);
            } /*if (moneyAmount < 0) {
                addWater.removeEventListener('click');
                addMilk.removeEventListener('click');
                add
            }*/

            //ADD UPGRADES

            /*setInterval(() => {
                waterAmountP.innerHTML = "You have " + (waterAmount += 10) + " mg of water.";
            }, 3000);*/

            if (moneyAmount > 0) {

            }

            addWater.addEventListener('click', () => {
                waterAmountP.innerHTML = "You have " + (waterAmount += 200) + " mg of water. (1/s)";
                machineP.innerHTML = "";
                moneyP.innerHTML = "Money: <br>" + "$" + (moneyAmount -= 1);
            });

            setInterval(() => {
                waterAmountP.innerHTML = "You have " + (waterAmount += 5) + " mg of water. (1/s)";
            }, 5000);

            addMilk.addEventListener('click', () => {
                milkAmountP.innerHTML = "You have " + (milkAmount += 50) + " mg of milk. (0.6/s)"
                machineP.innerHTML = "";
                moneyP.innerHTML = "Money: <br>" + "$" + (moneyAmount -= 2);
            });

            setInterval(() => {
                milkAmountP.innerHTML = "You have " + (milkAmount += 3) + " mg of milk. (0.6/s)";
            }, 5000);

            addBeans.addEventListener('click', () => {
                beansAmountP.innerHTML = "You have " + (beansAmount += 15) + " g of coffee beans. (0.2/s)";
                machineP.innerHTML = "";
                moneyP.innerHTML = "Money: <br>" + "$" + (moneyAmount -= 3);
            });

            setInterval(() => {
                beansAmountP.innerHTML = "You have " + (beansAmount += 1) + " g of coffee beans. (0.2/s)";
            }, 5000);

            waterAmountP.innerHTML = `You have ${waterAmount} mg of water.`
            milkAmountP.innerHTML = `You have ${milkAmount} mg of milk.`
            beansAmountP.innerHTML = `You have ${beansAmount} mg of coffee beans.`

            //let waterTotal = waterAmount / 200;
            //let milkTotal = milkAmount / 50;
            //let beansTotal = beansAmount / 15;

            function check () {
                if (waterAmount / 200 == targetCups && 
                milkAmount / 50 == targetCups &&
                beansAmount / 15 == targetCups) {
                    machineP.innerHTML = "You have enough coffee! Click the 'brew' button to begin making coffee.";
                } else if (waterAmount / 200 > targetCups &&
                    milkAmount / 50 > targetCups &&
                    beansAmount / 15 > targetCups) {
                        let limitingReg;
                        let regAmount;
                        if (Math.floor(waterAmount / 200) <= Math.floor(milkAmount / 50) && Math.floor(waterAmount / 200) <= Math.floor(beansAmount / 15)) {
                            limitingReg = waterAmount;
                            regAmount = 200;
                            machineP.innerHTML = "You have more than enough coffee! I can make " + (Math.floor(limitingReg / regAmount) - 1) + " more cups of coffee. Click the 'brew' button to begin making coffee.";
                        } else if (Math.floor(milkAmount / 50) <= Math.floor(waterAmount / 200) && Math.floor(milkAmount / 50) <= Math.floor(beansAmount / 15)) {
                            limitingReg = milkAmount;
                            regAmount = 50;
                            machineP.innerHTML = "You have more than enough coffee! I can make " + (Math.floor(limitingReg / regAmount) - 1) + " more cups of coffee. Click the 'brew' button to begin making coffee.";
                        } else if (Math.floor(beansAmount / 15) <= Math.floor(waterAmount / 200) && Math.floor(beansAmount / 15) <= Math.floor(milkAmount / 50)) {
                            limitingReg = beansAmount;
                            regAmount = 15;
                            machineP.innerHTML = "You have more than enough coffee! I can make " + (Math.floor(limitingReg / regAmount) - 1) + " more cups of coffee. Click the 'brew' button to begin making coffee.";
                        }
                } else if (waterAmount / 200 < targetCups ||
                    milkAmount / 50 < targetCups ||
                    beansAmount / 15 < targetCups) {
                    machineP.innerHTML = "You do not have enough coffee! Stock the coffee machine with more ingredients and try again.";
                }
            }

            /*let limitingReg;
            let regAmount;

            let ingArr = [waterAmount, milkAmount, beansAmount];*/

            function brew() {
                arr = ['Starting to make coffee...', 'Boiling water...', 'Mixing boiled water with crushed coffee beans...',
                'Pouring the coffee into the cup...', 'Pouring some milk into the cup...', 'Coffee is ready!'];
                setInterval(() => {
                    for (i = 0; i < arr.length; i++) {
                        machineP.innerHTML = arr[1]; //arr[0], arr[1], arr[2], etc. would work. However, it would lack conciseness.
                    }
                }, 3000)
            }

            if (waterAmount === 0 && milkAmount === 0 && beansAmount === 0) {
                machineP.innerHTML = "The coffee machine has no ingredients. Use the '+' buttons to stock it.";
            }
            /*function machine() {
                waterLabel.innerHTML = "How many ml of water does the coffee machine have?"
            }*/
        </script>
    </body>
</html>
